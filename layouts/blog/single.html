{{ define "main" }}
<article class="blog-post">
  <div class="blog-post-header py-5 mb-5 bg-light">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-12 col-lg-10">
          <h1 class="display-4 text-center mb-4">{{ .Title }}</h1>
          <div class="blog-post-meta text-center text-muted mb-4">
            <span class="me-3">
              <i class="fas fa-calendar-alt me-1"></i>
              {{ .Date.Format "January 2, 2006" }}
            </span>
            {{ if .Params.authors }}
            <span class="me-3">
              <i class="fas fa-user me-1"></i>
              {{ range $index, $author := .Params.authors }}
                {{- if gt $index 0 }}, {{ end -}}
                {{- $author -}}
              {{ end }}
            </span>
            {{ end }}
            <span>
              <i class="fas fa-clock me-1"></i>
              {{ .ReadingTime }} min read
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="row justify-content-center">
      {{ if .Params.images }}
      <div class="col-md-12 col-lg-10 mb-5">
        <div class="blog-featured-image">
          {{- .Scratch.Set "fillImage" "1270x715 Center" -}}
          {{ partial "content/figure.html" . }}
        </div>
      </div>
      {{ end }}
      
      <div class="col-md-12 col-lg-8">
        <div class="blog-post-content">
          {{ .Content }}
        </div>

        {{ if .Params.tags -}}
        <div class="blog-post-tags mt-5">
          <h5 class="text-muted mb-3">Tags:</h5>
          {{ range $index, $tag := .Params.tags -}}
            <a class="btn btn-light me-2 mb-2" href="{{ "/tags/" | absURL }}{{ . | urlize }}/" role="button">#{{ . }}</a>
          {{ end -}}
        </div>
        {{ end -}}
  </div>
</div>
</article>

{{ $related := .Site.RegularPages.Related . | first 3 -}}
{{ with $related -}}
<div class="related-posts">
<div class="row justify-content-center">
  <div class="col">
    <h2 class="section-title">Related posts</h2>
  </div>
</div>
<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-lg-5">
  {{ range . -}}
  <div class="col">
    <div class="card">
      {{- .Scratch.Set "fillImageCard" "1270x620 Center" -}}
      {{ partial "content/card-image.html" . }}
      <div class="card-body">
        <article>
          <h2 class="h3"><a class="stretched-link text-body" href="{{ .RelPermalink }}">{{ .Params.title }}</a></h2>
          <p>{{ .Params.excerpt | safeHTML }}</p>
          {{ partial "main/blog-meta.html" . -}}
        </article>
      </div>
    </div>
  </div>
  {{ end -}}
</div>
</div>
{{ end -}}

{{ end }}


